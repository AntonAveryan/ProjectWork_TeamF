{% extends 'core/base.html' %}
{% load static i18n %}

{% block content %}
<div class="cv-card cv-card-chat">

  <!-- Small back link inside the card -->
  <div class="cv-card-top-row">
    <a href="{% url 'landing' %}" class="cv-back-link">
      ← {% trans "Back to start" %}
    </a>
  </div>

  <div class="cv-card-title-wrap">
    <h1 class="cv-title">{% trans "Dont be shy – ask questions" %}</h1>
    <p class="cv-subtitle">
      {% trans "Our soft AI-powered career guidance will help you" %}
    </p>
  </div>

  <div class="cv-chat-window" id="cv-chat-window">
    <!-- Streaming text when chat is empty -->
    <div class="cv-chat-empty-message" id="cv-chat-empty-message">
      <span id="cv-streaming-text"></span>
    </div>
    <!-- Initial AI greeting -->
    <div class="cv-chat-row cv-chat-row-ai">
      <div class="cv-chat-bubble cv-chat-bubble-ai">
        {% trans "Hi, how can I help you? Upload your CV and I will analyze and help find positions." %}
      </div>
      <div class="cv-avatar cv-avatar-ai">AI</div>
    </div>
  </div>

  <div class="cv-chat-input-row" id="cv-chat-input-row">
    <input type="file" id="cv-file-input" accept=".pdf,application/pdf" style="position: absolute; width: 1px; height: 1px; opacity: 0; overflow: hidden;">
    <button class="cv-upload-btn" type="button" id="cv-upload-btn" title="{% trans 'Upload PDF CV' %}">+</button>
    <input class="cv-chat-input" type="text" id="cv-chat-input" placeholder="{% trans 'Upload your CV or ask any questions' %}">
    <a href="{% url 'positions' %}" class="cv-primary-btn cv-positions-btn" id="cv-positions-btn">{% trans "To positions →" %}</a>
    <button class="cv-send-btn" type="button" id="cv-send-btn">→</button>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'core/chat.js' %}?v=2"></script>
{% endblock %}
