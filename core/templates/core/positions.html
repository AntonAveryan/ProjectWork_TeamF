{% extends 'core/base.html' %}
{% load static i18n %}

{% block content %}
<div class="cv-card cv-card-positions">

  <!-- маленький back-линк внутри карточки -->
  <div class="cv-card-top-row">
    <a href="{% url 'chat' %}" class="cv-back-link">
      ← {% trans "Back to chat" %}
    </a>
  </div>

  <div class="cv-card-title-wrap">
    <h1 class="cv-title">{% trans "Position perfectly suits you" %}</h1>
    <p class="cv-subtitle">{% trans "Find positions easier" %}</p>
  </div>

  <!-- City Search Input -->
  <div class="cv-city-search">
    <label class="cv-city-search-label">
      <span>{% trans "Search jobs in city" %}</span>
      <div class="cv-city-search-input-group">
        <input type="text" id="cityInput" class="cv-city-input" placeholder="{% trans 'e.g., London, New York, San Francisco' %}" value="London">
        <button id="searchJobsBtn" class="cv-primary-btn cv-search-btn">{% trans "Search" %}</button>
      </div>
    </label>
  </div>

  <div class="cv-positions-toolbar">
    <div class="cv-positions-title">{% trans "LinkedIn Job Listing" %}</div>
    <div class="cv-positions-buttons">
      <button id="sortBtn" class="cv-secondary-btn cv-toolbar-btn">{% trans "Sort" %}</button>
      <button id="refreshBtn" class="cv-secondary-btn cv-toolbar-btn">{% trans "Refresh" %}</button>
      <button id="favoritesBtn" class="cv-secondary-btn cv-toolbar-btn">{% trans "Favorites" %}</button>
    </div>
  </div>

  <!-- Loading State -->
  <div id="loadingState" class="cv-loading-state" style="display: none;">
    <p>{% trans "Loading jobs..." %}</p>
  </div>

  <!-- Error State -->
  <div id="errorState" class="cv-error-state" style="display: none;">
    <p id="errorMessage"></p>
  </div>

  <!-- Job List -->
  <div id="jobList" class="cv-job-list">
    <p id="emptyState" class="cv-empty-state">
      {% blocktrans %}
      Enter a city and click "Search" to find jobs matching your career profile.
      {% endblocktrans %}
    </p>
  </div>
</div>

<!-- SORT/FILTER MODAL -->
<div id="sortModal" class="cv-modal-overlay">
  <div class="cv-modal">
    <div class="cv-modal-content">

      <div class="cv-modal-row">
        <label class="cv-pill-select">
          <span>{% trans "Date posted" %}</span>
          <select id="sortDateSelect">
            <option value="newest">{% trans "Newest first" %}</option>
            <option value="oldest">{% trans "Oldest first" %}</option>
          </select>
        </label>

        <label class="cv-pill-select">
          <span>{% trans "Experience level" %}</span>
          <select id="levelSelect">
            <option value="">{% trans "Any" %}</option>
            <option value="Junior">{% trans "Junior" %}</option>
            <option value="Mid">{% trans "Mid" %}</option>
            <option value="Senior">{% trans "Senior" %}</option>
          </select>
        </label>

        <label class="cv-pill-select">
          <span>{% trans "Company" %}</span>
          <select id="companySelect">
            <option value="">{% trans "Any" %}</option>
            <option value="SAP">SAP</option>
          </select>
        </label>

        <label class="cv-pill-select">
          <span>{% trans "Remote" %}</span>
          <select id="modeSelect">
            <option value="">{% trans "Any" %}</option>
            <option value="On-site">{% trans "On-site" %}</option>
            <option value="Hybrid">{% trans "Hybrid" %}</option>
            <option value="Remote">{% trans "Remote" %}</option>
          </select>
        </label>
      </div>
    </div>

    <div class="cv-modal-footer">
      <button id="clearFilterBtn" class="cv-secondary-btn cv-modal-footer-btn">
        {% trans "Clear all" %}
      </button>
      <button id="applyFilterBtn" class="cv-primary-btn cv-modal-footer-btn">
        {% trans "Apply filter" %}
      </button>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'core/positions.js' %}"></script>
{% endblock %}
